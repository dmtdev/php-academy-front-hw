<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS 02</title>
</head>
<body>

</body>
<script>
    //1
    //2
    var unreversed = [1, 2, 4, 8, 16, 32];

    function reverse(elements) {
        var reversed = [];
        elements.forEach(function (element) {
            reversed.unshift(element);
        });
        return reversed;
    }

    console.log(reverse(unreversed));

    //3
    var salaries = [3100, 890, 1120, 740, 2100,
        550, 540, 3200, 1570, 250];

    function sortSalaries(salaryList) {
        var salaryListCopy = salaryList.slice();
        var maxValue = Math.max.apply(null, salaryList);
        var divider = maxValue.toString().length - 1;
        divider = Math.pow(10, divider);
        for (var i = 0; i < salaryListCopy.length; i++) {
            salaryListCopy[i] = salaryListCopy[i] / divider;
        }
        salaryListCopy.sort();
        for (var i = 0; i < salaryListCopy.length; i++) {
            salaryListCopy[i] = Math.round(salaryListCopy[i] * divider);
        }
        return salaryListCopy;
    }

    console.log(sortSalaries(salaries));

    //4
    var result = salaries.reduce(function (pValue, cValue) {
        if (cValue < 1000 && cValue > pValue) {
            return cValue;
        }
        return pValue;
    }, 0);
    console.log(result);


    //5
    var mayBeSquares = [1, 2, 3, 4, 8, 9, 15, 16,
        34, 36, 38, 24, 25, 26];

    function extractSquares(nums) {
        var result = [];
        for (var i = 0; i < nums.length; i++) {
            if (Number.isInteger(Math.pow(nums[i], 0.5))) {
                result.push(nums[i]);
            }
        }
        return result;
    }

    console.log(extractSquares(mayBeSquares));

    //6
    var teamMates = ['Mike', 'Peter', 'Alex', 'Sonya',
        'Mike', 'Mary', 'Like', 'Alex', 'Abraham', 'Mary'];

    function unique(elements) {
        var unique = [];
        for (var i = 0; i < elements.length; i++) {
            if (unique.indexOf(elements[i]) == -1) {
                unique.push(elements[i]);
            }
        }
        return unique;
    }

    console.log(unique(teamMates));

    //7
    var transactions = [
        [101, 102, 103], // поступление
        [], // отправка
        [104, 105, 106], // поступление и т.д.
        [103], // отправка и т.д.
        [107, 108],
        [105, 106],
        [109, 110, 111, 112],
        [108, 110],
        [103],
        [111]
    ];

    function balance(actions) {
        var itemsIn = 0;
        var itemsOut = 0;
        var itemsAvailable = [];
        for (var i = 0; i < actions.length; i++) {
            for (var j = 0; j < actions[i].length; j++) {
                if (i % 2 == 0) {
                    itemsIn++;
                    //if (itemsAvailable.indexOf(actions[i][j]) == -1) {
                    itemsAvailable.push(actions[i][j]);
                    //}
                } else {
                    itemsOut++;
                    itemsAvailable[itemsAvailable.indexOf(actions[i][j])] = undefined;
                }
            }
        }
        itemsAvailable = itemsAvailable.filter(function (elem) {
            if (elem) {
                return elem;
            }
        });
        return 'Пришло: ' + itemsIn + ';\n' +
            'Отправлено: ' + itemsOut + ';\n' +
            'Товары на складе: ' + itemsAvailable;
    }

    balance(transactions);

</script>
</html>